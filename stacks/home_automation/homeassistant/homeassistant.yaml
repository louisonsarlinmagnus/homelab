################################################################################
# HOME ASSISTANT STACK => docker compose -f stacks/home_automation/homeassistant/homeassistant.yaml up -d
################################################################################

services:

  homeassistant:
    image: homeassistant/home-assistant:2026.2
    restart: unless-stopped
    labels:
      traefik.enable: "true"
      traefik.http.services.homeassistant.loadbalancer.server.port: 8123
      traefik.http.routers.homeassistant.rule: Host(`homeassistant.lsarlinmagnus.fr`)
      traefik.http.routers.homeassistant.entrypoints: websecure
      traefik.http.routers.homeassistant.tls: true
      traefik.http.routers.homeassistant.tls.certresolver: ovh
      homepage.group: Home Automation
      homepage.name: Home Assistant
      homepage.icon: home-assistant.png
      homepage.href: https://homeassistant.lsarlinmagnus.fr
      homepage.widget.type: homeassistant
      homepage.widget.url: http://homeassistant:8123
      homepage.widget.key: ${HOMEASSISTANT_HOMEPAGE_API_KEY}
      homepage.widget.fields: '["people_home", "lights_on", "switches_on"]'
    environment:
      TZ: Europe/Paris
    volumes:
      - config:/config
    networks:
      - proxy

volumes:
  config:

networks:
  proxy:
    external: true