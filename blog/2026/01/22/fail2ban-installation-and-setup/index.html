
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://louisonsarlinmagnus.github.io/homelab/blog/2026/01/22/fail2ban-installation-and-setup/">
      
      
        <link rel="prev" href="../../16/monitoring/">
      
      
        <link rel="next" href="../../../02/03/power-consumption/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Fail2Ban installation and setup - Documentation and journey of my homelab</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


  
  
    
    
      
    
    
  
  
  <style>.md-tag.md-tag--testID{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 2v2h1v14a4 4 0 0 0 4 4 4 4 0 0 0 4-4V4h1V2H7m4 14c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1m2-4c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1m1-5h-4V4h4v3Z"/></svg>');}</style>

    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../stylesheets/custom.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="lime">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="Documentation and journey of my homelab" class="md-header__button md-logo" aria-label="Documentation and journey of my homelab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation and journey of my homelab
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Fail2Ban installation and setup
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="lime"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/louisonsarlinmagnus/homelab" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    homelab
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../.." class="md-tabs__link">
        
  
    
  
  Welcome to my homelab project

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../scripts/" class="md-tabs__link">
          
  
    
  
  Scripts

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../cheatsheet/" class="md-tabs__link">
          
  
    
  
  Cheatsheet Markdown

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../../" class="md-tabs__link">
          
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Documentation and journey of my homelab" class="md-nav__button md-logo" aria-label="Documentation and journey of my homelab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Documentation and journey of my homelab
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/louisonsarlinmagnus/homelab" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    homelab
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to my homelab project
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../../scripts/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Scripts
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../../cheatsheet/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Cheatsheet Markdown
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2026/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2026
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2025/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2025
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../../../" class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
                  <span class="md-ellipsis">
                    Back to index
                  </span>
                </a>
              </div>
            </div>
            
              <div class="md-post__authors md-typeset">
                
                  <div class="md-profile md-post__profile">
                    <span class="md-author md-author--long">
                      <img src="https://avatars.githubusercontent.com/u/70757160" alt="Louison SARLIN--MAGNUS">
                    </span>
                    <span class="md-profile__description">
                      <strong>
                        
                          <a href="https://github.com/louisonsarlinmagnus">Louison SARLIN--MAGNUS</a>
                        
                      </strong>
                      <br>
                      Creator
                    </span>
                  </div>
                
              </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    Metadata
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg>
                        <time datetime="2026-01-22 00:00:00" class="md-ellipsis">January 22, 2026</time>
                      </div>
                    </li>
                    
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg>
                          <span class="md-ellipsis">
                            
                              6 min read
                            
                          </span>
                        </div>
                      </li>
                    
                  </ul>
                </nav>
              </li>
            </ul>
          </nav>
          
            

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    <span class="md-ellipsis">
      SSH
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authelia" class="md-nav__link">
    <span class="md-ellipsis">
      Authelia
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualisation" class="md-nav__link">
    <span class="md-ellipsis">
      Visualisation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Visualisation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obtain-the-logs" class="md-nav__link">
    <span class="md-ellipsis">
      Obtain the logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extract-the-data-from-every-line" class="md-nav__link">
    <span class="md-ellipsis">
      Extract the data from every line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-ip-to-location" class="md-nav__link">
    <span class="md-ellipsis">
      From IP to Location
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Result overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display-on-grafana" class="md-nav__link">
    <span class="md-ellipsis">
      Display on Grafana
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        

  
  


  <h1>Fail2Ban installation and setup</h1>

<p>Fail2Ban scans log files like <code>/var/log/auth.log</code> and bans IP addresses conducting too many <strong>failed login attempts</strong>. It does this by updating system firewall rules to reject new connections from those IP addresses, for a configurable amount of time. Fail2Ban comes out-of-the-box ready to read many standard log files, such as those for sshd and Apache, and is easily configured to read any log file of your choosing, for any error you wish.</p>
<!-- more -->

<p><img alt="Test" src="../../../../../resources/img/fail2ban_geoip_screenshot.png" /></p>
<h3 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h3>
<p>Let's play a bunch of commands to install fail2ban !</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos="1 "></span></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><a href="#__codelineno-0-2"><span class="linenos" data-linenos="2 "></span></a>sudo<span class="w"> </span>apt<span class="w"> </span>upgrade<span class="w"> </span>-y
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a><a href="#__codelineno-0-3"><span class="linenos" data-linenos="3 "></span></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a><a href="#__codelineno-0-4"><span class="linenos" data-linenos="4 "></span></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>fail2ban
</span></code></pre></div>
<p>Fail2ban comes with default settings that work well for most users, but you can customize it to suit your needs. The main configuration file is located at /etc/fail2ban/jail.conf, but itâ€™s better to create a local copy for your custom settings to prevent overwriting during updates. Create a new file called jail.local:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><a href="#__codelineno-1-1"><span class="linenos" data-linenos="1 "></span></a>sudo<span class="w"> </span>cp<span class="w"> </span>/etc/fail2ban/jail.conf<span class="w"> </span>/etc/fail2ban/jail.local
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><a href="#__codelineno-1-2"><span class="linenos" data-linenos="2 "></span></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/fail2ban/jail.local
</span></code></pre></div></p>
<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h3>
<h4 id="ssh">SSH<a class="headerlink" href="#ssh" title="Permanent link">&para;</a></h4>
<p>The default configuration is nice but let's twist it a bit !</p>
<p>Firstly, the conditions to meet to be temporarly ban :
<div class="language-ini highlight"><span class="filename">/etc/fail2ban/jail.local</span><pre><span></span><code><span id="__span-2-101"><a id="__codelineno-2-101" name="__codelineno-2-101"></a><a href="#__codelineno-2-101"><span class="linenos" data-linenos="101 "></span></a><span class="na">bantime</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">10m</span>
</span><span id="__span-2-102"><a id="__codelineno-2-102" name="__codelineno-2-102"></a><a href="#__codelineno-2-102"><span class="linenos" data-linenos="102 "></span></a><span class="na">findtime</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">10m</span>
</span><span id="__span-2-103"><a id="__codelineno-2-103" name="__codelineno-2-103"></a><a href="#__codelineno-2-103"><span class="linenos" data-linenos="103 "></span></a><span class="na">maxretry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">5</span>
</span></code></pre></div></p>
<p>Then we can configure the sshd jail:
<div class="language-ini highlight"><span class="filename">/etc/fail2ban/jail.local</span><pre><span></span><code><span id="__span-3-274"><a id="__codelineno-3-274" name="__codelineno-3-274"></a><a href="#__codelineno-3-274"><span class="linenos" data-linenos="274 "></span></a><span class="k">[sshd]</span>
</span><span id="__span-3-275"><a id="__codelineno-3-275" name="__codelineno-3-275"></a><a href="#__codelineno-3-275"><span class="linenos" data-linenos="275 "></span></a>
</span><span id="__span-3-276"><a id="__codelineno-3-276" name="__codelineno-3-276"></a><a href="#__codelineno-3-276"><span class="linenos" data-linenos="276 "></span></a><span class="na">port</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s">xxx</span><span class="w"> </span><span class="c1"># Being a custom port other than 22</span>
</span><span id="__span-3-277"><a id="__codelineno-3-277" name="__codelineno-3-277"></a><a href="#__codelineno-3-277"><span class="linenos" data-linenos="277 "></span></a><span class="na">logpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/var/log/auth.log</span>
</span><span id="__span-3-278"><a id="__codelineno-3-278" name="__codelineno-3-278"></a><a href="#__codelineno-3-278"><span class="linenos" data-linenos="278 "></span></a><span class="na">backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(sshd_backend)s</span>
</span></code></pre></div></p>
<p>By default, logs are handled by <code>journalctl</code>. We have to persist those logs :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><a href="#__codelineno-4-1"><span class="linenos" data-linenos="1 "></span></a>cat<span class="w"> </span>/var/log/auth.log
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><a href="#__codelineno-4-2"><span class="linenos" data-linenos="2 "></span></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>rsyslog
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><a href="#__codelineno-4-3"><span class="linenos" data-linenos="3 "></span></a>cat<span class="w"> </span>/var/log/auth.log
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">Failed tries on existing user will not trigger a fail2ban "fail"</p>
<p>To prevent false-positive with user using multiple sshkeys</p>
</div>
<h4 id="authelia">Authelia<a class="headerlink" href="#authelia" title="Permanent link">&para;</a></h4>
<p>Firstly, let's create a filter to store our beautiful regex :</p>
<div class="language-ini highlight"><span class="filename">/etc/fail2ban/filter.d/authelia.conf</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><a href="#__codelineno-5-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1"># Fail2Ban filter for Authelia</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a><a href="#__codelineno-5-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><a href="#__codelineno-5-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1"># Make sure that the HTTP header &quot;X-Forwarded-For&quot; received by Authelia&#39;s backend</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><a href="#__codelineno-5-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="c1"># only contains a single IP address (the one from the end-user), and not the proxy chain</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><a href="#__codelineno-5-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="c1"># (it is misleading: usually, this is the purpose of this header).</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a><a href="#__codelineno-5-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7"></a><a href="#__codelineno-5-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="c1"># the failregex rule counts every failed 1FA attempt (first line, wrong username or password) and failed 2FA attempt</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8"></a><a href="#__codelineno-5-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="c1"># second line) as a failure.</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9"></a><a href="#__codelineno-5-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="c1"># the ignoreregex rule ignores info and warning messages as all authentication failures are flagged as errors</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10"></a><a href="#__codelineno-5-10"><span class="linenos" data-linenos="10 "></span></a><span class="c1"># the third line catches incorrect usernames entered at the password reset form</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11"></a><a href="#__codelineno-5-11"><span class="linenos" data-linenos="11 "></span></a><span class="c1"># the fourth line catches attempts to spam via the password reset form or 2fa device reset form. This requires debug logging to be enabled</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12"></a><a href="#__codelineno-5-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13"></a><a href="#__codelineno-5-13"><span class="linenos" data-linenos="13 "></span></a><span class="k">[Definition]</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14"></a><a href="#__codelineno-5-14"><span class="linenos" data-linenos="14 "></span></a><span class="na">failregex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">^.*Unsuccessful (1FA|TOTP|Duo|U2F) authentication attempt by user .*remote_ip&quot;?(:|=)&quot;?&lt;HOST&gt;&quot;?.*$</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15"></a><a href="#__codelineno-5-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="na">^.*user not found.*path</span><span class="o">=</span><span class="s">/api/reset-password/identity/start remote_ip&quot;?(:|=)&quot;?&lt;HOST&gt;&quot;?.*$</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16"></a><a href="#__codelineno-5-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="na">^.*Sending an email to user.*path</span><span class="o">=</span><span class="s">/api/.*/start remote_ip&quot;?(:|=)&quot;?&lt;HOST&gt;&quot;?.*$</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17"></a><a href="#__codelineno-5-17"><span class="linenos" data-linenos="17 "></span></a>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18"></a><a href="#__codelineno-5-18"><span class="linenos" data-linenos="18 "></span></a><span class="na">ignoreregex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">^.*level&quot;?(:|=)&quot;?info.*</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19"></a><a href="#__codelineno-5-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">              </span><span class="na">^.*level&quot;?(</span><span class="o">:</span><span class="s">|=)&quot;?warning.*</span>
</span></code></pre></div>
<p>The we create and configure a new jail in <code>jail.local</code></p>
<div class="language-ini highlight"><span class="filename">/etc/fail2ban/jail.local</span><pre><span></span><code><span id="__span-6-982"><a id="__codelineno-6-982" name="__codelineno-6-982"></a><a href="#__codelineno-6-982"><span class="linenos" data-linenos="982 "></span></a><span class="k">[authelia]</span>
</span><span id="__span-6-983"><a id="__codelineno-6-983" name="__codelineno-6-983"></a><a href="#__codelineno-6-983"><span class="linenos" data-linenos="983 "></span></a><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
</span><span id="__span-6-984"><a id="__codelineno-6-984" name="__codelineno-6-984"></a><a href="#__codelineno-6-984"><span class="linenos" data-linenos="984 "></span></a><span class="na">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">http,https,9091</span>
</span><span id="__span-6-985"><a id="__codelineno-6-985" name="__codelineno-6-985"></a><a href="#__codelineno-6-985"><span class="linenos" data-linenos="985 "></span></a><span class="na">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">authelia</span>
</span><span id="__span-6-986"><a id="__codelineno-6-986" name="__codelineno-6-986"></a><a href="#__codelineno-6-986"><span class="linenos" data-linenos="986 "></span></a><span class="na">logpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/var/log/authelia/authelia.log</span>
</span><span id="__span-6-987"><a id="__codelineno-6-987" name="__codelineno-6-987"></a><a href="#__codelineno-6-987"><span class="linenos" data-linenos="987 "></span></a><span class="na">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">DOCKER-USER</span>
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Don't forget to persist authelia logs</p>
</div>
<p>Usefull commands :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><a href="#__codelineno-7-1"><span class="linenos" data-linenos="1 "></span></a><span class="c1">#To restart fail2ban</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a><a href="#__codelineno-7-2"><span class="linenos" data-linenos="2 "></span></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>fail2ban.service
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a><a href="#__codelineno-7-3"><span class="linenos" data-linenos="3 "></span></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4"></a><a href="#__codelineno-7-4"><span class="linenos" data-linenos="4 "></span></a><span class="c1">#To get jail status</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5"></a><a href="#__codelineno-7-5"><span class="linenos" data-linenos="5 "></span></a>sudo<span class="w"> </span>fail2ban-client<span class="w"> </span>status<span class="w"> </span>authelia
</span></code></pre></div>
<div class="admonition bug">
<p class="admonition-title">sshd works but not Authelia</p>
<p>It appears that sshd ban remote IP, but for some reason, the authelia jail bans a local ip "10.0.0.2" instead of the ip of the sender.<br />
This issue has been addressed by setting the port mode to host for both 80 and 443 ports for the Traefik service.</p>
</div>
<h3 id="visualisation">Visualisation<a class="headerlink" href="#visualisation" title="Permanent link">&para;</a></h3>
<p>With Alloy it is really easy to extract some data from a file. Luckily fail2ban stores everything we need in it's fail2ban.log file !</p>
<div class="language-text highlight"><span class="filename">/var/log/fail2ban.log</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>2026-01-18 00:03:52,228 fail2ban.filter         [2140643]: INFO    [sshd] Found 176.120.22.47 - 2026-01-18 00:03:51
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>2026-01-18 00:04:13,306 fail2ban.filter         [2140643]: INFO    [sshd] Found 176.120.22.47 - 2026-01-18 00:04:13
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>2026-01-18 00:05:02,978 fail2ban.filter         [2140643]: INFO    [sshd] Found 176.120.22.47 - 2026-01-18 00:05:02
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>2026-01-18 00:05:14,955 fail2ban.filter         [2140643]: INFO    [sshd] Found 176.120.22.47 - 2026-01-18 00:05:14
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>2026-01-18 00:05:27,767 fail2ban.filter         [2140643]: INFO    [sshd] Found 176.120.22.47 - 2026-01-18 00:05:27
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>2026-01-18 00:05:27,919 fail2ban.actions        [2140643]: NOTICE  [sshd] Ban 176.120.22.47
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>2026-01-18 00:15:27,472 fail2ban.actions        [2140643]: NOTICE  [sshd] Unban 176.120.22.47
</span></code></pre></div>
<h4 id="obtain-the-logs">Obtain the logs<a class="headerlink" href="#obtain-the-logs" title="Permanent link">&para;</a></h4>
<p>The first step is to locate and scarpe the file, this is easily done with the following components :  </p>
<div class="language-alloy highlight"><span class="filename">config.alloy</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">// Retrieve fail2ban logfile</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">local</span><span class="o">.</span><span class="n">file_match</span><span class="w"> </span><span class="s">&quot;fail2ban&quot;</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="n">path_targets</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="o">[{</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="n">__address__</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;localhost&quot;</span><span class="p">,</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="n">__path__</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">fail2ban</span><span class="o">.</span><span class="n">log&quot;</span><span class="p">,</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="c1">// __path_exclude__  = &quot;/var/log/fail2ban.log.*.gz&quot;,</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="n">instance</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;homelab&quot;</span><span class="p">,</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="n">job</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;fail2ban&quot;</span><span class="p">,</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">  </span><span class="o">}]</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="o">}</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="c1">// Scrape the file and send it to loki</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="n">loki</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">file</span><span class="w"> </span><span class="s">&quot;fail2ban&quot;</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">    </span><span class="n">targets</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">local</span><span class="o">.</span><span class="n">file_match</span><span class="o">.</span><span class="n">fail2ban</span><span class="o">.</span><span class="n">targets</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">    </span><span class="n">forward_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">loki</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">fail2ban_get_ip</span><span class="o">.</span><span class="n">receiver</span><span class="o">]</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="o">}</span>
</span></code></pre></div>
<h4 id="extract-the-data-from-every-line">Extract the data from every line<a class="headerlink" href="#extract-the-data-from-every-line" title="Permanent link">&para;</a></h4>
<p>Fail2Ban does not build it's log with a convinient JSON format but with a regex we can extract the data we want and appending those data in labels to every log entry.</p>
<div class="language-alloy highlight"><span class="filename">config.alloy</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1">// Process the log entries to extract data</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">loki</span><span class="o">.</span><span class="n">process</span><span class="w"> </span><span class="s">&quot;fail2ban_get_ip&quot;</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="n">forward_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">loki</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">fail2ban_geoip_lookup</span><span class="o">.</span><span class="n">receiver</span><span class="o">]</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="c1">// Store in group desired data</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="n">stage</span><span class="o">.</span><span class="n">regex</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">        </span><span class="n">expression</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;</span><span class="o">^(</span><span class="err">?</span><span class="n">P</span><span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span><span class="err">\\</span><span class="n">d</span><span class="o">{</span><span class="mi">4</span><span class="o">}-</span><span class="err">\\</span><span class="n">d</span><span class="o">{</span><span class="mi">2</span><span class="o">}-</span><span class="err">\\</span><span class="n">d</span><span class="o">{</span><span class="mi">2</span><span class="o">}</span><span class="w"> </span><span class="err">\\</span><span class="n">d</span><span class="o">{</span><span class="mi">2</span><span class="o">}</span><span class="p">:</span><span class="err">\\</span><span class="n">d</span><span class="o">{</span><span class="mi">2</span><span class="o">}</span><span class="p">:</span><span class="err">\\</span><span class="n">d</span><span class="o">{</span><span class="mi">2</span><span class="o">}</span><span class="p">,</span><span class="err">\\</span><span class="n">d</span><span class="o">{</span><span class="mi">3</span><span class="o">})</span><span class="err">\\</span><span class="n">s</span><span class="o">+(</span><span class="err">?</span><span class="n">P</span><span class="o">&lt;</span><span class="n">fail2ban_component</span><span class="o">&gt;</span><span class="n">fail2ban</span><span class="err">\\</span><span class="o">.</span><span class="err">\\</span><span class="n">w</span><span class="o">+)</span><span class="err">\\</span><span class="n">s</span><span class="o">+</span><span class="err">\\</span><span class="o">[(</span><span class="err">?</span><span class="n">P</span><span class="o">&lt;</span><span class="n">pid</span><span class="o">&gt;</span><span class="err">\\</span><span class="n">d</span><span class="o">+)</span><span class="err">\\</span><span class="o">]</span><span class="p">:</span><span class="err">\\</span><span class="n">s</span><span class="o">+(</span><span class="err">?</span><span class="n">P</span><span class="o">&lt;</span><span class="n">level</span><span class="o">&gt;</span><span class="err">\\</span><span class="n">w</span><span class="o">+)</span><span class="err">\\</span><span class="n">s</span><span class="o">+</span><span class="err">\\</span><span class="o">[(</span><span class="err">?</span><span class="n">P</span><span class="o">&lt;</span><span class="n">jail</span><span class="o">&gt;[^</span><span class="err">\\</span><span class="o">]]+)</span><span class="err">\\</span><span class="o">]</span><span class="err">\\</span><span class="n">s</span><span class="o">+(</span><span class="err">?</span><span class="n">P</span><span class="o">&lt;</span><span class="n">action</span><span class="o">&gt;</span><span class="err">\\</span><span class="n">w</span><span class="o">+)</span><span class="err">\\</span><span class="n">s</span><span class="o">+(</span><span class="err">?</span><span class="n">P</span><span class="o">&lt;</span><span class="n">ip</span><span class="o">&gt;(</span><span class="err">?</span><span class="p">:</span><span class="err">\\</span><span class="n">d</span><span class="o">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="o">}</span><span class="err">\\</span><span class="o">.){</span><span class="mi">3</span><span class="o">}</span><span class="err">\\</span><span class="n">d</span><span class="o">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="o">})</span><span class="err">?&quot;</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="c1">// Define the time format for the &quot;time&quot; data retrieve in the log entry</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span><span class="n">stage</span><span class="o">.</span><span class="n">timestamp</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">        </span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;time&quot;</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">        </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;2006-01-02 15:04:05,000&quot;</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">    </span><span class="c1">// Natively associate every regex group with a label with the same name</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">    </span><span class="n">stage</span><span class="o">.</span><span class="n">labels</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">        </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">            </span><span class="n">time</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">            </span><span class="n">fail2ban_component</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">            </span><span class="n">jail</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">            </span><span class="n">ip</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">            </span><span class="n">action</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="o">}</span>
</span></code></pre></div>
<h4 id="from-ip-to-location">From IP to Location<a class="headerlink" href="#from-ip-to-location" title="Permanent link">&para;</a></h4>
<p>Thankfully Alloy already has <code>stage.geoip</code> within the <code>loki.process</code> component ! With this it's child's play :</p>
<div class="language-alloy highlight"><span class="filename">config.alloy</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">// Process the log entries to lookup data</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">loki</span><span class="o">.</span><span class="n">process</span><span class="w"> </span><span class="s">&quot;fail2ban_geoip_lookup&quot;</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="n">forward_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">loki</span><span class="o">.</span><span class="n">write</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">receiver</span><span class="o">]</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">    </span><span class="c1">// Lookup for each ip entry within the GeoLite2 database</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">    </span><span class="n">stage</span><span class="o">.</span><span class="n">geoip</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">        </span><span class="n">db</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">GeoLite2</span><span class="o">/</span><span class="n">GeoLite2</span><span class="o">-</span><span class="n">City</span><span class="o">.</span><span class="n">mmdb&quot;</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">        </span><span class="n">source</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ip&quot;</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">        </span><span class="n">db_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;city&quot;</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">    </span><span class="c1">// Natively associate every geoip output with a label with the same name</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">    </span><span class="n">stage</span><span class="o">.</span><span class="n">labels</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="w">        </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="w">            </span><span class="n">geoip_city_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="w">            </span><span class="n">geoip_country_name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="w">            </span><span class="c1">// geoip_country_code       = &quot;&quot;,</span>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="w">            </span><span class="n">geoip_continent_name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="w">            </span><span class="c1">// geoip_continent_code     = &quot;&quot;,</span>
</span><span id="__span-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="w">            </span><span class="n">geoip_location_latitude</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a><span class="w">            </span><span class="n">geoip_location_longitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-11-22"><a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-11-23"><a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-11-24"><a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="o">}</span>
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">You can only set 15 labels for each entry, remove the useless ones</p>
</div>
<h4 id="result-overview">Result overview<a class="headerlink" href="#result-overview" title="Permanent link">&para;</a></h4>
<div class="admonition example">
<p class="admonition-title">This is what the above parts do</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Raw entry</label><label for="__tabbed_1_2">Scraped entry</label><label for="__tabbed_1_3">IP extracted</label><label for="__tabbed_1_4">Location extracted</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>2026-01-22 13:32:42,616 fail2ban.filter         [2140643]: INFO    [sshd] Found 91.202.233.33 - 2026-01-22 13:32:42
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-json highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kc">t</span><span class="err">imes</span><span class="kc">ta</span><span class="err">mp</span><span class="p">:</span><span class="w"> </span><span class="mi">2026-01-22</span><span class="err">T</span><span class="mi">13</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">42.616669492</span><span class="err">Z</span><span class="p">,</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="err">e</span><span class="kc">ntr</span><span class="err">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2026-01-22</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span><span class="mi">616</span><span class="w"> </span><span class="kc">fa</span><span class="err">il</span><span class="mi">2</span><span class="err">ba</span><span class="kc">n</span><span class="err">.</span><span class="kc">f</span><span class="err">il</span><span class="kc">ter</span><span class="w">         </span><span class="p">[</span><span class="mi">2140643</span><span class="p">]:</span><span class="w"> </span><span class="err">INFO</span><span class="w">    </span><span class="p">[</span><span class="err">sshd</span><span class="p">]</span><span class="w"> </span><span class="err">Fou</span><span class="kc">n</span><span class="err">d</span><span class="w"> </span><span class="mf">91.202.233.33</span><span class="w"> </span><span class="mi">-</span><span class="w"> </span><span class="mi">2026-01-22</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="err">labels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="kc">f</span><span class="err">ile</span><span class="kc">na</span><span class="err">me=</span><span class="s2">&quot;/var/log/fail2ban.log&quot;</span><span class="p">,</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="err">i</span><span class="kc">nstan</span><span class="err">ce=</span><span class="s2">&quot;homelab&quot;</span><span class="p">,</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="err">job=</span><span class="s2">&quot;fail2ban&quot;</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="err">s</span><span class="kc">tru</span><span class="err">c</span><span class="kc">ture</span><span class="err">d_me</span><span class="kc">ta</span><span class="err">da</span><span class="kc">ta</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-json highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kc">t</span><span class="err">imes</span><span class="kc">ta</span><span class="err">mp</span><span class="p">:</span><span class="w"> </span><span class="mi">2026-01-22</span><span class="err">T</span><span class="mi">13</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">42.616669492</span><span class="err">Z</span><span class="p">,</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="err">e</span><span class="kc">ntr</span><span class="err">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2026-01-22</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span><span class="mi">616</span><span class="w"> </span><span class="kc">fa</span><span class="err">il</span><span class="mi">2</span><span class="err">ba</span><span class="kc">n</span><span class="err">.</span><span class="kc">f</span><span class="err">il</span><span class="kc">ter</span><span class="w">         </span><span class="p">[</span><span class="mi">2140643</span><span class="p">]:</span><span class="w"> </span><span class="err">INFO</span><span class="w">    </span><span class="p">[</span><span class="err">sshd</span><span class="p">]</span><span class="w"> </span><span class="err">Fou</span><span class="kc">n</span><span class="err">d</span><span class="w"> </span><span class="mf">91.202.233.33</span><span class="w"> </span><span class="mi">-</span><span class="w"> </span><span class="mi">2026-01-22</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="err">labels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="err">ac</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="err">=</span><span class="s2">&quot;Found&quot;</span><span class="p">,</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="kc">fa</span><span class="err">il</span><span class="mi">2</span><span class="err">ba</span><span class="kc">n</span><span class="err">_compo</span><span class="kc">nent</span><span class="err">=</span><span class="s2">&quot;fail2ban.filter&quot;</span><span class="p">,</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="kc">f</span><span class="err">ile</span><span class="kc">na</span><span class="err">me=</span><span class="s2">&quot;/var/log/fail2ban.log&quot;</span><span class="p">,</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">    </span><span class="err">i</span><span class="kc">nstan</span><span class="err">ce=</span><span class="s2">&quot;homelab&quot;</span><span class="p">,</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="err">ip=</span><span class="s2">&quot;91.202.233.33&quot;</span><span class="p">,</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">    </span><span class="err">jail=</span><span class="s2">&quot;sshd&quot;</span><span class="p">,</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">    </span><span class="err">job=</span><span class="s2">&quot;fail2ban&quot;</span><span class="p">,</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">    </span><span class="kc">t</span><span class="err">ime=</span><span class="s2">&quot;2026-01-22 13:32:42,616&quot;</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="p">},</span><span class="w"> </span><span class="err">s</span><span class="kc">tru</span><span class="err">c</span><span class="kc">ture</span><span class="err">d_me</span><span class="kc">ta</span><span class="err">da</span><span class="kc">ta</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-json highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kc">t</span><span class="err">imes</span><span class="kc">ta</span><span class="err">mp</span><span class="p">:</span><span class="w"> </span><span class="mi">2026-01-22</span><span class="err">T</span><span class="mi">13</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">42.616669492</span><span class="err">Z</span><span class="p">,</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="err">e</span><span class="kc">ntr</span><span class="err">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2026-01-22</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span><span class="mi">616</span><span class="w"> </span><span class="kc">fa</span><span class="err">il</span><span class="mi">2</span><span class="err">ba</span><span class="kc">n</span><span class="err">.</span><span class="kc">f</span><span class="err">il</span><span class="kc">ter</span><span class="w">         </span><span class="p">[</span><span class="mi">2140643</span><span class="p">]:</span><span class="w"> </span><span class="err">INFO</span><span class="w">    </span><span class="p">[</span><span class="err">sshd</span><span class="p">]</span><span class="w"> </span><span class="err">Fou</span><span class="kc">n</span><span class="err">d</span><span class="w"> </span><span class="mf">91.202.233.33</span><span class="w"> </span><span class="mi">-</span><span class="w"> </span><span class="mi">2026-01-22</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="err">labels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">    </span><span class="err">ac</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="err">=</span><span class="s2">&quot;Found&quot;</span><span class="p">,</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">    </span><span class="kc">fa</span><span class="err">il</span><span class="mi">2</span><span class="err">ba</span><span class="kc">n</span><span class="err">_compo</span><span class="kc">nent</span><span class="err">=</span><span class="s2">&quot;fail2ban.filter&quot;</span><span class="p">,</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">    </span><span class="kc">f</span><span class="err">ile</span><span class="kc">na</span><span class="err">me=</span><span class="s2">&quot;/var/log/fail2ban.log&quot;</span><span class="p">,</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">    </span><span class="err">geoip_co</span><span class="kc">nt</span><span class="err">i</span><span class="kc">nent</span><span class="err">_</span><span class="kc">na</span><span class="err">me=</span><span class="s2">&quot;Europe&quot;</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">    </span><span class="err">geoip_cou</span><span class="kc">ntr</span><span class="err">y_</span><span class="kc">na</span><span class="err">me=</span><span class="s2">&quot;Russia&quot;</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">    </span><span class="err">geoip_loca</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="err">_la</span><span class="kc">t</span><span class="err">i</span><span class="kc">tu</span><span class="err">de=</span><span class="s2">&quot;55.7386&quot;</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">    </span><span class="err">geoip_loca</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="err">_lo</span><span class="kc">n</span><span class="err">gi</span><span class="kc">tu</span><span class="err">de=</span><span class="s2">&quot;37.6068&quot;</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">    </span><span class="err">i</span><span class="kc">nstan</span><span class="err">ce=</span><span class="s2">&quot;homelab&quot;</span><span class="p">,</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">    </span><span class="err">ip=</span><span class="s2">&quot;91.202.233.33&quot;</span><span class="p">,</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="w">    </span><span class="err">jail=</span><span class="s2">&quot;sshd&quot;</span><span class="p">,</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="w">    </span><span class="err">job=</span><span class="s2">&quot;fail2ban&quot;</span><span class="p">,</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="w">    </span><span class="kc">t</span><span class="err">ime=</span><span class="s2">&quot;2026-01-22 13:32:42,616&quot;</span>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a><span class="p">},</span>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="err">s</span><span class="kc">tru</span><span class="err">c</span><span class="kc">ture</span><span class="err">d_me</span><span class="kc">ta</span><span class="err">da</span><span class="kc">ta</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<h4 id="display-on-grafana">Display on Grafana<a class="headerlink" href="#display-on-grafana" title="Permanent link">&para;</a></h4>
<p>For Grafana it's not hard, just some config and toggling the right settings!</p>
<div class="admonition tip">
<p class="admonition-title">Do not forget to extract labels, and convert lat and long to number in "Transformations" !</p>
</div>
<details class="note">
<summary>The JSON for a neat Heatmap</summary>
<div class="language-json highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><a href="#__codelineno-16-1"><span class="linenos" data-linenos="  1 "></span></a><span class="p">{</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a><a href="#__codelineno-16-2"><span class="linenos" data-linenos="  2 "></span></a><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">48</span><span class="p">,</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><a href="#__codelineno-16-3"><span class="linenos" data-linenos="  3 "></span></a><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;geomap&quot;</span><span class="p">,</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a><a href="#__codelineno-16-4"><span class="linenos" data-linenos="  4 "></span></a><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Fail2Ban GeoIP&quot;</span><span class="p">,</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5"></a><a href="#__codelineno-16-5"><span class="linenos" data-linenos="  5 "></span></a><span class="nt">&quot;gridPos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6"></a><a href="#__codelineno-16-6"><span class="linenos" data-linenos="  6 "></span></a><span class="w">    </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7"></a><a href="#__codelineno-16-7"><span class="linenos" data-linenos="  7 "></span></a><span class="w">    </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8"></a><a href="#__codelineno-16-8"><span class="linenos" data-linenos="  8 "></span></a><span class="w">    </span><span class="nt">&quot;h&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9"></a><a href="#__codelineno-16-9"><span class="linenos" data-linenos="  9 "></span></a><span class="w">    </span><span class="nt">&quot;w&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10"></a><a href="#__codelineno-16-10"><span class="linenos" data-linenos=" 10 "></span></a><span class="p">},</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11"></a><a href="#__codelineno-16-11"><span class="linenos" data-linenos=" 11 "></span></a><span class="nt">&quot;fieldConfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12"></a><a href="#__codelineno-16-12"><span class="linenos" data-linenos=" 12 "></span></a><span class="w">    </span><span class="nt">&quot;defaults&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13"></a><a href="#__codelineno-16-13"><span class="linenos" data-linenos=" 13 "></span></a><span class="w">    </span><span class="nt">&quot;custom&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14"></a><a href="#__codelineno-16-14"><span class="linenos" data-linenos=" 14 "></span></a><span class="w">        </span><span class="nt">&quot;hideFrom&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15"></a><a href="#__codelineno-16-15"><span class="linenos" data-linenos=" 15 "></span></a><span class="w">        </span><span class="nt">&quot;tooltip&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16"></a><a href="#__codelineno-16-16"><span class="linenos" data-linenos=" 16 "></span></a><span class="w">        </span><span class="nt">&quot;viz&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17"></a><a href="#__codelineno-16-17"><span class="linenos" data-linenos=" 17 "></span></a><span class="w">        </span><span class="nt">&quot;legend&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18"></a><a href="#__codelineno-16-18"><span class="linenos" data-linenos=" 18 "></span></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19"></a><a href="#__codelineno-16-19"><span class="linenos" data-linenos=" 19 "></span></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20"></a><a href="#__codelineno-16-20"><span class="linenos" data-linenos=" 20 "></span></a><span class="w">    </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21"></a><a href="#__codelineno-16-21"><span class="linenos" data-linenos=" 21 "></span></a><span class="w">    </span><span class="nt">&quot;thresholds&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22"></a><a href="#__codelineno-16-22"><span class="linenos" data-linenos=" 22 "></span></a><span class="w">        </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;absolute&quot;</span><span class="p">,</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23"></a><a href="#__codelineno-16-23"><span class="linenos" data-linenos=" 23 "></span></a><span class="w">        </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24"></a><a href="#__codelineno-16-24"><span class="linenos" data-linenos=" 24 "></span></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25"></a><a href="#__codelineno-16-25"><span class="linenos" data-linenos=" 25 "></span></a><span class="w">            </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
</span><span id="__span-16-26"><a id="__codelineno-16-26" name="__codelineno-16-26"></a><a href="#__codelineno-16-26"><span class="linenos" data-linenos=" 26 "></span></a><span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
</span><span id="__span-16-27"><a id="__codelineno-16-27" name="__codelineno-16-27"></a><a href="#__codelineno-16-27"><span class="linenos" data-linenos=" 27 "></span></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-16-28"><a id="__codelineno-16-28" name="__codelineno-16-28"></a><a href="#__codelineno-16-28"><span class="linenos" data-linenos=" 28 "></span></a><span class="w">        </span><span class="p">]</span>
</span><span id="__span-16-29"><a id="__codelineno-16-29" name="__codelineno-16-29"></a><a href="#__codelineno-16-29"><span class="linenos" data-linenos=" 29 "></span></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-16-30"><a id="__codelineno-16-30" name="__codelineno-16-30"></a><a href="#__codelineno-16-30"><span class="linenos" data-linenos=" 30 "></span></a><span class="w">    </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-31"><a id="__codelineno-16-31" name="__codelineno-16-31"></a><a href="#__codelineno-16-31"><span class="linenos" data-linenos=" 31 "></span></a><span class="w">        </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thresholds&quot;</span>
</span><span id="__span-16-32"><a id="__codelineno-16-32" name="__codelineno-16-32"></a><a href="#__codelineno-16-32"><span class="linenos" data-linenos=" 32 "></span></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-33"><a id="__codelineno-16-33" name="__codelineno-16-33"></a><a href="#__codelineno-16-33"><span class="linenos" data-linenos=" 33 "></span></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-16-34"><a id="__codelineno-16-34" name="__codelineno-16-34"></a><a href="#__codelineno-16-34"><span class="linenos" data-linenos=" 34 "></span></a><span class="w">    </span><span class="nt">&quot;overrides&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
</span><span id="__span-16-35"><a id="__codelineno-16-35" name="__codelineno-16-35"></a><a href="#__codelineno-16-35"><span class="linenos" data-linenos=" 35 "></span></a><span class="p">},</span>
</span><span id="__span-16-36"><a id="__codelineno-16-36" name="__codelineno-16-36"></a><a href="#__codelineno-16-36"><span class="linenos" data-linenos=" 36 "></span></a><span class="nt">&quot;transformations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-16-37"><a id="__codelineno-16-37" name="__codelineno-16-37"></a><a href="#__codelineno-16-37"><span class="linenos" data-linenos=" 37 "></span></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-16-38"><a id="__codelineno-16-38" name="__codelineno-16-38"></a><a href="#__codelineno-16-38"><span class="linenos" data-linenos=" 38 "></span></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extractFields&quot;</span><span class="p">,</span>
</span><span id="__span-16-39"><a id="__codelineno-16-39" name="__codelineno-16-39"></a><a href="#__codelineno-16-39"><span class="linenos" data-linenos=" 39 "></span></a><span class="w">    </span><span class="nt">&quot;options&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-40"><a id="__codelineno-16-40" name="__codelineno-16-40"></a><a href="#__codelineno-16-40"><span class="linenos" data-linenos=" 40 "></span></a><span class="w">        </span><span class="nt">&quot;delimiter&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="p">,</span>
</span><span id="__span-16-41"><a id="__codelineno-16-41" name="__codelineno-16-41"></a><a href="#__codelineno-16-41"><span class="linenos" data-linenos=" 41 "></span></a><span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;labels&quot;</span>
</span><span id="__span-16-42"><a id="__codelineno-16-42" name="__codelineno-16-42"></a><a href="#__codelineno-16-42"><span class="linenos" data-linenos=" 42 "></span></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-43"><a id="__codelineno-16-43" name="__codelineno-16-43"></a><a href="#__codelineno-16-43"><span class="linenos" data-linenos=" 43 "></span></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-16-44"><a id="__codelineno-16-44" name="__codelineno-16-44"></a><a href="#__codelineno-16-44"><span class="linenos" data-linenos=" 44 "></span></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-16-45"><a id="__codelineno-16-45" name="__codelineno-16-45"></a><a href="#__codelineno-16-45"><span class="linenos" data-linenos=" 45 "></span></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;convertFieldType&quot;</span><span class="p">,</span>
</span><span id="__span-16-46"><a id="__codelineno-16-46" name="__codelineno-16-46"></a><a href="#__codelineno-16-46"><span class="linenos" data-linenos=" 46 "></span></a><span class="w">    </span><span class="nt">&quot;options&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-47"><a id="__codelineno-16-47" name="__codelineno-16-47"></a><a href="#__codelineno-16-47"><span class="linenos" data-linenos=" 47 "></span></a><span class="w">        </span><span class="nt">&quot;conversions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-16-48"><a id="__codelineno-16-48" name="__codelineno-16-48"></a><a href="#__codelineno-16-48"><span class="linenos" data-linenos=" 48 "></span></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-16-49"><a id="__codelineno-16-49" name="__codelineno-16-49"></a><a href="#__codelineno-16-49"><span class="linenos" data-linenos=" 49 "></span></a><span class="w">            </span><span class="nt">&quot;destinationType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
</span><span id="__span-16-50"><a id="__codelineno-16-50" name="__codelineno-16-50"></a><a href="#__codelineno-16-50"><span class="linenos" data-linenos=" 50 "></span></a><span class="w">            </span><span class="nt">&quot;targetField&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;geoip_location_latitude&quot;</span>
</span><span id="__span-16-51"><a id="__codelineno-16-51" name="__codelineno-16-51"></a><a href="#__codelineno-16-51"><span class="linenos" data-linenos=" 51 "></span></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-16-52"><a id="__codelineno-16-52" name="__codelineno-16-52"></a><a href="#__codelineno-16-52"><span class="linenos" data-linenos=" 52 "></span></a><span class="w">        </span><span class="p">],</span>
</span><span id="__span-16-53"><a id="__codelineno-16-53" name="__codelineno-16-53"></a><a href="#__codelineno-16-53"><span class="linenos" data-linenos=" 53 "></span></a><span class="w">        </span><span class="nt">&quot;fields&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-16-54"><a id="__codelineno-16-54" name="__codelineno-16-54"></a><a href="#__codelineno-16-54"><span class="linenos" data-linenos=" 54 "></span></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-55"><a id="__codelineno-16-55" name="__codelineno-16-55"></a><a href="#__codelineno-16-55"><span class="linenos" data-linenos=" 55 "></span></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-16-56"><a id="__codelineno-16-56" name="__codelineno-16-56"></a><a href="#__codelineno-16-56"><span class="linenos" data-linenos=" 56 "></span></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-16-57"><a id="__codelineno-16-57" name="__codelineno-16-57"></a><a href="#__codelineno-16-57"><span class="linenos" data-linenos=" 57 "></span></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;convertFieldType&quot;</span><span class="p">,</span>
</span><span id="__span-16-58"><a id="__codelineno-16-58" name="__codelineno-16-58"></a><a href="#__codelineno-16-58"><span class="linenos" data-linenos=" 58 "></span></a><span class="w">    </span><span class="nt">&quot;options&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-59"><a id="__codelineno-16-59" name="__codelineno-16-59"></a><a href="#__codelineno-16-59"><span class="linenos" data-linenos=" 59 "></span></a><span class="w">        </span><span class="nt">&quot;conversions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-16-60"><a id="__codelineno-16-60" name="__codelineno-16-60"></a><a href="#__codelineno-16-60"><span class="linenos" data-linenos=" 60 "></span></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-16-61"><a id="__codelineno-16-61" name="__codelineno-16-61"></a><a href="#__codelineno-16-61"><span class="linenos" data-linenos=" 61 "></span></a><span class="w">            </span><span class="nt">&quot;destinationType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
</span><span id="__span-16-62"><a id="__codelineno-16-62" name="__codelineno-16-62"></a><a href="#__codelineno-16-62"><span class="linenos" data-linenos=" 62 "></span></a><span class="w">            </span><span class="nt">&quot;targetField&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;geoip_location_longitude&quot;</span>
</span><span id="__span-16-63"><a id="__codelineno-16-63" name="__codelineno-16-63"></a><a href="#__codelineno-16-63"><span class="linenos" data-linenos=" 63 "></span></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-16-64"><a id="__codelineno-16-64" name="__codelineno-16-64"></a><a href="#__codelineno-16-64"><span class="linenos" data-linenos=" 64 "></span></a><span class="w">        </span><span class="p">],</span>
</span><span id="__span-16-65"><a id="__codelineno-16-65" name="__codelineno-16-65"></a><a href="#__codelineno-16-65"><span class="linenos" data-linenos=" 65 "></span></a><span class="w">        </span><span class="nt">&quot;fields&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-16-66"><a id="__codelineno-16-66" name="__codelineno-16-66"></a><a href="#__codelineno-16-66"><span class="linenos" data-linenos=" 66 "></span></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-67"><a id="__codelineno-16-67" name="__codelineno-16-67"></a><a href="#__codelineno-16-67"><span class="linenos" data-linenos=" 67 "></span></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-68"><a id="__codelineno-16-68" name="__codelineno-16-68"></a><a href="#__codelineno-16-68"><span class="linenos" data-linenos=" 68 "></span></a><span class="p">],</span>
</span><span id="__span-16-69"><a id="__codelineno-16-69" name="__codelineno-16-69"></a><a href="#__codelineno-16-69"><span class="linenos" data-linenos=" 69 "></span></a><span class="nt">&quot;pluginVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;12.3.0&quot;</span><span class="p">,</span>
</span><span id="__span-16-70"><a id="__codelineno-16-70" name="__codelineno-16-70"></a><a href="#__codelineno-16-70"><span class="linenos" data-linenos=" 70 "></span></a><span class="nt">&quot;targets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-16-71"><a id="__codelineno-16-71" name="__codelineno-16-71"></a><a href="#__codelineno-16-71"><span class="linenos" data-linenos=" 71 "></span></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-16-72"><a id="__codelineno-16-72" name="__codelineno-16-72"></a><a href="#__codelineno-16-72"><span class="linenos" data-linenos=" 72 "></span></a><span class="w">    </span><span class="nt">&quot;datasource&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-73"><a id="__codelineno-16-73" name="__codelineno-16-73"></a><a href="#__codelineno-16-73"><span class="linenos" data-linenos=" 73 "></span></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;loki&quot;</span><span class="p">,</span>
</span><span id="__span-16-74"><a id="__codelineno-16-74" name="__codelineno-16-74"></a><a href="#__codelineno-16-74"><span class="linenos" data-linenos=" 74 "></span></a><span class="w">        </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;P8E80F9AEF21F6940&quot;</span>
</span><span id="__span-16-75"><a id="__codelineno-16-75" name="__codelineno-16-75"></a><a href="#__codelineno-16-75"><span class="linenos" data-linenos=" 75 "></span></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-16-76"><a id="__codelineno-16-76" name="__codelineno-16-76"></a><a href="#__codelineno-16-76"><span class="linenos" data-linenos=" 76 "></span></a><span class="w">    </span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;backward&quot;</span><span class="p">,</span>
</span><span id="__span-16-77"><a id="__codelineno-16-77" name="__codelineno-16-77"></a><a href="#__codelineno-16-77"><span class="linenos" data-linenos=" 77 "></span></a><span class="w">    </span><span class="nt">&quot;editorMode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;builder&quot;</span><span class="p">,</span>
</span><span id="__span-16-78"><a id="__codelineno-16-78" name="__codelineno-16-78"></a><a href="#__codelineno-16-78"><span class="linenos" data-linenos=" 78 "></span></a><span class="w">    </span><span class="nt">&quot;expr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{job=\&quot;fail2ban\&quot;, action=\&quot;Found\&quot;}&quot;</span><span class="p">,</span>
</span><span id="__span-16-79"><a id="__codelineno-16-79" name="__codelineno-16-79"></a><a href="#__codelineno-16-79"><span class="linenos" data-linenos=" 79 "></span></a><span class="w">    </span><span class="nt">&quot;hide&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-16-80"><a id="__codelineno-16-80" name="__codelineno-16-80"></a><a href="#__codelineno-16-80"><span class="linenos" data-linenos=" 80 "></span></a><span class="w">    </span><span class="nt">&quot;legendFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-16-81"><a id="__codelineno-16-81" name="__codelineno-16-81"></a><a href="#__codelineno-16-81"><span class="linenos" data-linenos=" 81 "></span></a><span class="w">    </span><span class="nt">&quot;queryType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;range&quot;</span><span class="p">,</span>
</span><span id="__span-16-82"><a id="__codelineno-16-82" name="__codelineno-16-82"></a><a href="#__codelineno-16-82"><span class="linenos" data-linenos=" 82 "></span></a><span class="w">    </span><span class="nt">&quot;refId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>
</span><span id="__span-16-83"><a id="__codelineno-16-83" name="__codelineno-16-83"></a><a href="#__codelineno-16-83"><span class="linenos" data-linenos=" 83 "></span></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-84"><a id="__codelineno-16-84" name="__codelineno-16-84"></a><a href="#__codelineno-16-84"><span class="linenos" data-linenos=" 84 "></span></a><span class="p">],</span>
</span><span id="__span-16-85"><a id="__codelineno-16-85" name="__codelineno-16-85"></a><a href="#__codelineno-16-85"><span class="linenos" data-linenos=" 85 "></span></a><span class="nt">&quot;datasource&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-86"><a id="__codelineno-16-86" name="__codelineno-16-86"></a><a href="#__codelineno-16-86"><span class="linenos" data-linenos=" 86 "></span></a><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;loki&quot;</span><span class="p">,</span>
</span><span id="__span-16-87"><a id="__codelineno-16-87" name="__codelineno-16-87"></a><a href="#__codelineno-16-87"><span class="linenos" data-linenos=" 87 "></span></a><span class="w">    </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;P8E80F9AEF21F6940&quot;</span>
</span><span id="__span-16-88"><a id="__codelineno-16-88" name="__codelineno-16-88"></a><a href="#__codelineno-16-88"><span class="linenos" data-linenos=" 88 "></span></a><span class="p">},</span>
</span><span id="__span-16-89"><a id="__codelineno-16-89" name="__codelineno-16-89"></a><a href="#__codelineno-16-89"><span class="linenos" data-linenos=" 89 "></span></a><span class="nt">&quot;options&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-90"><a id="__codelineno-16-90" name="__codelineno-16-90"></a><a href="#__codelineno-16-90"><span class="linenos" data-linenos=" 90 "></span></a><span class="w">    </span><span class="nt">&quot;view&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-91"><a id="__codelineno-16-91" name="__codelineno-16-91"></a><a href="#__codelineno-16-91"><span class="linenos" data-linenos=" 91 "></span></a><span class="w">    </span><span class="nt">&quot;allLayers&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-16-92"><a id="__codelineno-16-92" name="__codelineno-16-92"></a><a href="#__codelineno-16-92"><span class="linenos" data-linenos=" 92 "></span></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;coords&quot;</span><span class="p">,</span>
</span><span id="__span-16-93"><a id="__codelineno-16-93" name="__codelineno-16-93"></a><a href="#__codelineno-16-93"><span class="linenos" data-linenos=" 93 "></span></a><span class="w">    </span><span class="nt">&quot;lat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span>
</span><span id="__span-16-94"><a id="__codelineno-16-94" name="__codelineno-16-94"></a><a href="#__codelineno-16-94"><span class="linenos" data-linenos=" 94 "></span></a><span class="w">    </span><span class="nt">&quot;lon&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-16-95"><a id="__codelineno-16-95" name="__codelineno-16-95"></a><a href="#__codelineno-16-95"><span class="linenos" data-linenos=" 95 "></span></a><span class="w">    </span><span class="nt">&quot;noRepeat&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-16-96"><a id="__codelineno-16-96" name="__codelineno-16-96"></a><a href="#__codelineno-16-96"><span class="linenos" data-linenos=" 96 "></span></a><span class="w">    </span><span class="nt">&quot;zoom&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
</span><span id="__span-16-97"><a id="__codelineno-16-97" name="__codelineno-16-97"></a><a href="#__codelineno-16-97"><span class="linenos" data-linenos=" 97 "></span></a><span class="w">    </span><span class="nt">&quot;shared&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-16-98"><a id="__codelineno-16-98" name="__codelineno-16-98"></a><a href="#__codelineno-16-98"><span class="linenos" data-linenos=" 98 "></span></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-16-99"><a id="__codelineno-16-99" name="__codelineno-16-99"></a><a href="#__codelineno-16-99"><span class="linenos" data-linenos=" 99 "></span></a><span class="w">    </span><span class="nt">&quot;controls&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-100"><a id="__codelineno-16-100" name="__codelineno-16-100"></a><a href="#__codelineno-16-100"><span class="linenos" data-linenos="100 "></span></a><span class="w">    </span><span class="nt">&quot;showZoom&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-16-101"><a id="__codelineno-16-101" name="__codelineno-16-101"></a><a href="#__codelineno-16-101"><span class="linenos" data-linenos="101 "></span></a><span class="w">    </span><span class="nt">&quot;mouseWheelZoom&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-16-102"><a id="__codelineno-16-102" name="__codelineno-16-102"></a><a href="#__codelineno-16-102"><span class="linenos" data-linenos="102 "></span></a><span class="w">    </span><span class="nt">&quot;showAttribution&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-16-103"><a id="__codelineno-16-103" name="__codelineno-16-103"></a><a href="#__codelineno-16-103"><span class="linenos" data-linenos="103 "></span></a><span class="w">    </span><span class="nt">&quot;showScale&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-16-104"><a id="__codelineno-16-104" name="__codelineno-16-104"></a><a href="#__codelineno-16-104"><span class="linenos" data-linenos="104 "></span></a><span class="w">    </span><span class="nt">&quot;showMeasure&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-16-105"><a id="__codelineno-16-105" name="__codelineno-16-105"></a><a href="#__codelineno-16-105"><span class="linenos" data-linenos="105 "></span></a><span class="w">    </span><span class="nt">&quot;showDebug&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-16-106"><a id="__codelineno-16-106" name="__codelineno-16-106"></a><a href="#__codelineno-16-106"><span class="linenos" data-linenos="106 "></span></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-16-107"><a id="__codelineno-16-107" name="__codelineno-16-107"></a><a href="#__codelineno-16-107"><span class="linenos" data-linenos="107 "></span></a><span class="w">    </span><span class="nt">&quot;tooltip&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-108"><a id="__codelineno-16-108" name="__codelineno-16-108"></a><a href="#__codelineno-16-108"><span class="linenos" data-linenos="108 "></span></a><span class="w">    </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;none&quot;</span>
</span><span id="__span-16-109"><a id="__codelineno-16-109" name="__codelineno-16-109"></a><a href="#__codelineno-16-109"><span class="linenos" data-linenos="109 "></span></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-16-110"><a id="__codelineno-16-110" name="__codelineno-16-110"></a><a href="#__codelineno-16-110"><span class="linenos" data-linenos="110 "></span></a><span class="w">    </span><span class="nt">&quot;basemap&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-111"><a id="__codelineno-16-111" name="__codelineno-16-111"></a><a href="#__codelineno-16-111"><span class="linenos" data-linenos="111 "></span></a><span class="w">    </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-112"><a id="__codelineno-16-112" name="__codelineno-16-112"></a><a href="#__codelineno-16-112"><span class="linenos" data-linenos="112 "></span></a><span class="w">        </span><span class="nt">&quot;showLabels&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-16-113"><a id="__codelineno-16-113" name="__codelineno-16-113"></a><a href="#__codelineno-16-113"><span class="linenos" data-linenos="113 "></span></a><span class="w">        </span><span class="nt">&quot;theme&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;auto&quot;</span>
</span><span id="__span-16-114"><a id="__codelineno-16-114" name="__codelineno-16-114"></a><a href="#__codelineno-16-114"><span class="linenos" data-linenos="114 "></span></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-16-115"><a id="__codelineno-16-115" name="__codelineno-16-115"></a><a href="#__codelineno-16-115"><span class="linenos" data-linenos="115 "></span></a><span class="w">    </span><span class="nt">&quot;layer-tooltip&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-16-116"><a id="__codelineno-16-116" name="__codelineno-16-116"></a><a href="#__codelineno-16-116"><span class="linenos" data-linenos="116 "></span></a><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Layer 0&quot;</span><span class="p">,</span>
</span><span id="__span-16-117"><a id="__codelineno-16-117" name="__codelineno-16-117"></a><a href="#__codelineno-16-117"><span class="linenos" data-linenos="117 "></span></a><span class="w">    </span><span class="nt">&quot;noRepeat&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-16-118"><a id="__codelineno-16-118" name="__codelineno-16-118"></a><a href="#__codelineno-16-118"><span class="linenos" data-linenos="118 "></span></a><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;carto&quot;</span>
</span><span id="__span-16-119"><a id="__codelineno-16-119" name="__codelineno-16-119"></a><a href="#__codelineno-16-119"><span class="linenos" data-linenos="119 "></span></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-16-120"><a id="__codelineno-16-120" name="__codelineno-16-120"></a><a href="#__codelineno-16-120"><span class="linenos" data-linenos="120 "></span></a><span class="w">    </span><span class="nt">&quot;layers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-16-121"><a id="__codelineno-16-121" name="__codelineno-16-121"></a><a href="#__codelineno-16-121"><span class="linenos" data-linenos="121 "></span></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-16-122"><a id="__codelineno-16-122" name="__codelineno-16-122"></a><a href="#__codelineno-16-122"><span class="linenos" data-linenos="122 "></span></a><span class="w">        </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-123"><a id="__codelineno-16-123" name="__codelineno-16-123"></a><a href="#__codelineno-16-123"><span class="linenos" data-linenos="123 "></span></a><span class="w">        </span><span class="nt">&quot;blur&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span>
</span><span id="__span-16-124"><a id="__codelineno-16-124" name="__codelineno-16-124"></a><a href="#__codelineno-16-124"><span class="linenos" data-linenos="124 "></span></a><span class="w">        </span><span class="nt">&quot;radius&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span>
</span><span id="__span-16-125"><a id="__codelineno-16-125" name="__codelineno-16-125"></a><a href="#__codelineno-16-125"><span class="linenos" data-linenos="125 "></span></a><span class="w">        </span><span class="nt">&quot;weight&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-126"><a id="__codelineno-16-126" name="__codelineno-16-126"></a><a href="#__codelineno-16-126"><span class="linenos" data-linenos="126 "></span></a><span class="w">            </span><span class="nt">&quot;fixed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-16-127"><a id="__codelineno-16-127" name="__codelineno-16-127"></a><a href="#__codelineno-16-127"><span class="linenos" data-linenos="127 "></span></a><span class="w">            </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-16-128"><a id="__codelineno-16-128" name="__codelineno-16-128"></a><a href="#__codelineno-16-128"><span class="linenos" data-linenos="128 "></span></a><span class="w">            </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-16-129"><a id="__codelineno-16-129" name="__codelineno-16-129"></a><a href="#__codelineno-16-129"><span class="linenos" data-linenos="129 "></span></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-16-130"><a id="__codelineno-16-130" name="__codelineno-16-130"></a><a href="#__codelineno-16-130"><span class="linenos" data-linenos="130 "></span></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-16-131"><a id="__codelineno-16-131" name="__codelineno-16-131"></a><a href="#__codelineno-16-131"><span class="linenos" data-linenos="131 "></span></a><span class="w">        </span><span class="nt">&quot;filterData&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-132"><a id="__codelineno-16-132" name="__codelineno-16-132"></a><a href="#__codelineno-16-132"><span class="linenos" data-linenos="132 "></span></a><span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;byRefId&quot;</span><span class="p">,</span>
</span><span id="__span-16-133"><a id="__codelineno-16-133" name="__codelineno-16-133"></a><a href="#__codelineno-16-133"><span class="linenos" data-linenos="133 "></span></a><span class="w">        </span><span class="nt">&quot;options&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>
</span><span id="__span-16-134"><a id="__codelineno-16-134" name="__codelineno-16-134"></a><a href="#__codelineno-16-134"><span class="linenos" data-linenos="134 "></span></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-16-135"><a id="__codelineno-16-135" name="__codelineno-16-135"></a><a href="#__codelineno-16-135"><span class="linenos" data-linenos="135 "></span></a><span class="w">        </span><span class="nt">&quot;layer-tooltip&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-16-136"><a id="__codelineno-16-136" name="__codelineno-16-136"></a><a href="#__codelineno-16-136"><span class="linenos" data-linenos="136 "></span></a><span class="w">        </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-137"><a id="__codelineno-16-137" name="__codelineno-16-137"></a><a href="#__codelineno-16-137"><span class="linenos" data-linenos="137 "></span></a><span class="w">        </span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;geoip_location_latitude&quot;</span><span class="p">,</span>
</span><span id="__span-16-138"><a id="__codelineno-16-138" name="__codelineno-16-138"></a><a href="#__codelineno-16-138"><span class="linenos" data-linenos="138 "></span></a><span class="w">        </span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;geoip_location_longitude&quot;</span><span class="p">,</span>
</span><span id="__span-16-139"><a id="__codelineno-16-139" name="__codelineno-16-139"></a><a href="#__codelineno-16-139"><span class="linenos" data-linenos="139 "></span></a><span class="w">        </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;coords&quot;</span>
</span><span id="__span-16-140"><a id="__codelineno-16-140" name="__codelineno-16-140"></a><a href="#__codelineno-16-140"><span class="linenos" data-linenos="140 "></span></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-16-141"><a id="__codelineno-16-141" name="__codelineno-16-141"></a><a href="#__codelineno-16-141"><span class="linenos" data-linenos="141 "></span></a><span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Found&quot;</span><span class="p">,</span>
</span><span id="__span-16-142"><a id="__codelineno-16-142" name="__codelineno-16-142"></a><a href="#__codelineno-16-142"><span class="linenos" data-linenos="142 "></span></a><span class="w">        </span><span class="nt">&quot;opacity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-16-143"><a id="__codelineno-16-143" name="__codelineno-16-143"></a><a href="#__codelineno-16-143"><span class="linenos" data-linenos="143 "></span></a><span class="w">        </span><span class="nt">&quot;tooltip&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-16-144"><a id="__codelineno-16-144" name="__codelineno-16-144"></a><a href="#__codelineno-16-144"><span class="linenos" data-linenos="144 "></span></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;heatmap&quot;</span>
</span><span id="__span-16-145"><a id="__codelineno-16-145" name="__codelineno-16-145"></a><a href="#__codelineno-16-145"><span class="linenos" data-linenos="145 "></span></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-146"><a id="__codelineno-16-146" name="__codelineno-16-146"></a><a href="#__codelineno-16-146"><span class="linenos" data-linenos="146 "></span></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-16-147"><a id="__codelineno-16-147" name="__codelineno-16-147"></a><a href="#__codelineno-16-147"><span class="linenos" data-linenos="147 "></span></a><span class="p">}</span>
</span><span id="__span-16-148"><a id="__codelineno-16-148" name="__codelineno-16-148"></a><a href="#__codelineno-16-148"><span class="linenos" data-linenos="148 "></span></a><span class="p">}</span>
</span></code></pre></div>
</details>







  
  




  



      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../16/monitoring/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Monitoring">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Monitoring
              </div>
            </div>
          </a>
        
        
          
          <a href="../../../02/03/power-consumption/" class="md-footer__link md-footer__link--next" aria-label="Next: Power consumption">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Power consumption
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/louisonsm/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.path", "navigation.prune", "navigation.indexes", "toc.follow", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "navigation.footer"], "search": "../../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "tags": {"test": "testID"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>